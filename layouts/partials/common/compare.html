{{ $data_name := default "compare" .data_name }}
{{ $data := index .Site.Data.common $data_name }}
{{ $features := default $data.features .features }}
{{ $brands := default $data.brands .brands }}
{{ $compare_class := default $data.compare_class .compare_class }}
{{ $show_name := default $data.show_name .show_name }}
{{ $top_left_cell := default $data.top_left_cell .top_left_cell }}
{{ $price_cell := default $data.price_cell .price_cell }}
<section class="section is-compare{{ with $compare_class }} {{ . }}{{ end }}">
  <div class="container">
    <h1 class="title is-section-title">{{ default .title (T .title) }}</h1>

    <div class="compare-table">
      <table class="table is-fullwidth">
        <thead>
          <tr>
            <th>
              {{ default "Brands\n\n55â€³" $top_left_cell | markdownify }}
            </th>
            {{ range $brands }}
            <td class="{{ if .hideMobile }}is-hidden-mobile{{ end }}">
              <figure class="image">
                {{ $resource := resources.Get .icon }}
                {{ partial "common/srcset" (dict "resource" $resource "desktop" "228x") }}
              </figure>
              {{ if $show_name }}
              <p class="brand-name">{{ .name }}</p>
              {{ end }}
            </td>
            {{ end }}
          </tr>
        </thead>
        <tbody>
          {{ range $idx, $item := $features }}
          <tr>
            <td>
              {{ $item }}
            </td>
            {{ range $brands }}
            <td class="{{ if .hideMobile }}is-hidden-mobile{{ end }}">
              <div class="feature-checkmark">
              {{ if index .features $idx }}
              <span class="icon is-large is-feature-check">
                <figure class="image">
                  <svg width="100%" height="100%" viewBox="0 0 28 22" stroke="#66CCCC" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 8.92754L10.3333 19.0725L26 2" stroke-width="3"/>
                  </svg>
                </figure>
              </span>
              {{ end }}
              {{ with .feature_icons }}
              <div class="feature-icons">
                {{ range index . (string $idx) }}
                <span class="icon">
                  <figure class="image">
                    {{ $resource := resources.Get .icon }}
                    {{ partial "common/srcset" (dict "resource" $resource "desktop" "48x") }}
                  </figure>
                </span>
                {{ end }}
              </div>
              {{ end }}
              </div>
            </td>
            {{ end }}
          </tr>
          {{ end }}
        </tbody>
        <tfoot>
          <tr>
            <th>{{ default "Price" $price_cell }}</th>
            {{ range $brands }}
            <td class="{{ if .hideMobile }}is-hidden-mobile{{ end }}">
              <strong>{{ .price }}</strong>
            </td>
            {{ end }}
          </tr>
        </tfoot>
      </table>
    </div>
    {{ with .cta }}
    <div class="cta">
      <a href="{{ .url }}"
        class="button{{ with .class }} {{ . }}{{ end }}"
        {{ range .data }}
        data-{{ .key }}="{{ .value }}"
        {{ end }}
        >{{ default .title (T .title) }}</a>
    </div>
    {{ end }}
  </div>
</section>
